# ğŸ‰ å®Œæ•´éƒ¨ç½²æˆåŠŸï¼

## éƒ¨ç½²è³‡è¨Š

### å‰ç«¯
- **URL**: https://88b5a047.booking-manager-pil.pages.dev
- **å¹³å°**: Cloudflare Pages
- **ç‹€æ…‹**: âœ… é‹è¡Œä¸­
- **éƒ¨ç½²æ™‚é–“**: 2025-10-28 11:15 (UTC+8)

### å¾Œç«¯
- **URL**: https://booking-manager-worker.afago101.workers.dev
- **å¹³å°**: Cloudflare Workers
- **ç‹€æ…‹**: âœ… é‹è¡Œä¸­

### è³‡æ–™åº«
- **é¡å‹**: Google Sheets
- **ID**: 1MdxsHfSOo8Y4OJt7OnqOpSDYwTq3OHjIdNav-CaN4Uw
- **é€£çµ**: https://docs.google.com/spreadsheets/d/1MdxsHfSOo8Y4OJt7OnqOpSDYwTq3OHjIdNav-CaN4Uw/edit
- **å·¥ä½œè¡¨**: Bookings, Prices, config

## âœ… æ¸¬è©¦çµæœ

### å¾Œç«¯ API æ¸¬è©¦

| æ¸¬è©¦é …ç›® | çµæœ | èªªæ˜ |
|---------|------|------|
| Worker å¥åº·æª¢æŸ¥ | âœ… é€šé | HTTP 200, status: ok |
| Google Sheets é€£æ¥ | âœ… é€šé | æˆåŠŸè®€å¯« |
| æŸ¥è©¢å¯è¨‚æ—¥æœŸ | âœ… é€šé | è¿”å›æ­£ç¢ºæ ¼å¼è³‡æ–™ |
| å»ºç«‹æ¸¬è©¦è¨‚å–® | âœ… é€šé | ID: booking_mh9zlsdcp66ei1tpd |
| è®€å–è¨‚å–®åˆ—è¡¨ | âœ… é€šé | æˆåŠŸå¾ Sheets è®€å– |
| Admin èªè­‰ | âœ… é€šé | API Key é©—è­‰æ­£å¸¸ |

### å‰ç«¯æ¸¬è©¦

| æ¸¬è©¦é …ç›® | çµæœ | èªªæ˜ |
|---------|------|------|
| é é¢è¼‰å…¥ | âœ… é€šé | HTTP 200 |
| API URL é…ç½® | âœ… é€šé | æ­£ç¢ºæŒ‡å‘ Worker |
| éœæ…‹è³‡æº | âœ… é€šé | JS/CSS è¼‰å…¥æ­£å¸¸ |

### æ•´åˆæ¸¬è©¦

| æ¸¬è©¦é …ç›® | ç‹€æ…‹ |
|---------|------|
| å‰ç«¯ â†’ å¾Œç«¯é€£æ¥ | âœ… å·²é…ç½® |
| å¾Œç«¯ â†’ Google Sheets | âœ… å·²é©—è­‰ |
| ç«¯åˆ°ç«¯æµç¨‹ | âœ… å¯ç”¨ |

## ğŸ”‘ é‡è¦è³‡è¨Šï¼ˆè«‹ä¿å¯†ï¼‰

```
Admin API Key: 40lVHrWkepi2cOwZq7U19vIgNFaDoRXL
```

## ğŸ“‹ åŠŸèƒ½æ¸…å–®

### å‰å°åŠŸèƒ½
- âœ… æŸ¥çœ‹å¯è¨‚æ—¥æœŸ
- âœ… é¸æ“‡æ—¥æœŸç¯„åœ
- âœ… è¼¸å…¥è¨‚æˆ¿è³‡è¨Š
- âœ… å³æ™‚è¨ˆç®—åƒ¹æ ¼
- âœ… æäº¤è¨‚å–®
- âœ… æŸ¥çœ‹è¨‚å–®ç¢ºèª

### å¾Œå°åŠŸèƒ½
- âœ… ç®¡ç†å“¡ç™»å…¥
- âœ… æŸ¥çœ‹è¨‚å–®åˆ—è¡¨
- âœ… ä¿®æ”¹è¨‚å–®ç‹€æ…‹
- âœ… ç®¡ç†æˆ¿æ³ï¼ˆé—œæˆ¿/é–‹æ”¾ï¼‰
- âœ… è¨­å®šåƒ¹æ ¼
- âœ… ç³»çµ±è¨­å®š

### API åŠŸèƒ½
- âœ… RESTful API
- âœ… æ¨‚è§€é–æ©Ÿåˆ¶
- âœ… é€Ÿç‡é™åˆ¶
- âœ… CORS ä¿è­·
- âœ… Admin èªè­‰

## ğŸŒ è¨ªå•é€£çµ

### ç”¨æˆ¶ç«¯
- **è¨‚æˆ¿é é¢**: https://88b5a047.booking-manager-pil.pages.dev
- **è¨‚å–®æŸ¥è©¢**: https://88b5a047.booking-manager-pil.pages.dev/#/lookup

### ç®¡ç†ç«¯
- **å¾Œå°ç™»å…¥**: https://88b5a047.booking-manager-pil.pages.dev/#/admin/login
- **ç®¡ç†å„€è¡¨æ¿**: https://88b5a047.booking-manager-pil.pages.dev/#/admin/dashboard
- **ç™»å…¥å¯†ç¢¼**: `40lVHrWkepi2cOwZq7U19vIgNFaDoRXL`

### é–‹ç™¼å·¥å…·
- **API Health**: https://booking-manager-worker.afago101.workers.dev/api/health
- **Worker Dashboard**: https://dash.cloudflare.com/
- **Pages Dashboard**: https://dash.cloudflare.com/

## ğŸ“Š æ¸¬è©¦è¨‚å–®è³‡æ–™

å·²å»ºç«‹æ¸¬è©¦è¨‚å–®ï¼Œå¯åœ¨ Google Sheets å’Œå¾Œå°çœ‹åˆ°ï¼š

```
è¨‚å–® ID: booking_mh9zlsdcp66ei1tpd
é¡§å®¢å§“å: æ¸¬è©¦ç”¨æˆ¶
å…¥ä½æ—¥æœŸ: 2024-11-10
é€€æˆ¿æ—¥æœŸ: 2024-11-12
äººæ•¸: 2
ç¸½åƒ¹: $10,000
ç‹€æ…‹: pending
```

## ğŸ§ª æ‰‹å‹•æ¸¬è©¦æ­¥é©Ÿ

### 1. æ¸¬è©¦å‰å°è¨‚æˆ¿

1. è¨ªå• https://88b5a047.booking-manager-pil.pages.dev
2. é¸æ“‡æ—¥æœŸç¯„åœ
3. å¡«å¯«è¨‚æˆ¿è³‡è¨Š
4. æäº¤è¨‚å–®
5. æŸ¥çœ‹ç¢ºèªé é¢

### 2. æ¸¬è©¦å¾Œå°ç®¡ç†

1. è¨ªå• https://88b5a047.booking-manager-pil.pages.dev/#/admin/login
2. è¼¸å…¥å¯†ç¢¼: `40lVHrWkepi2cOwZq7U19vIgNFaDoRXL`
3. ç™»å…¥å¾Œå°
4. æŸ¥çœ‹è¨‚å–®åˆ—è¡¨
5. ä¿®æ”¹è¨‚å–®ç‹€æ…‹
6. ç®¡ç†æˆ¿æ³

### 3. æ¸¬è©¦ API

```powershell
# æŸ¥è©¢å¯è¨‚æ—¥æœŸ
Invoke-RestMethod -Uri "https://booking-manager-worker.afago101.workers.dev/api/availability?from=2024-12-01&to=2024-12-31"

# å»ºç«‹è¨‚å–®
$body = @{
    guestName = "æ–°è¨‚å–®"
    contactPhone = "0987654321"
    checkInDate = "2024-12-15"
    checkOutDate = "2024-12-17"
    numberOfGuests = 3
    useCoupon = $false
    totalPrice = 15000
} | ConvertTo-Json

Invoke-RestMethod -Uri "https://booking-manager-worker.afago101.workers.dev/api/bookings" `
  -Method POST -Body $body -ContentType "application/json"

# æŸ¥çœ‹æ‰€æœ‰è¨‚å–® (éœ€è¦ Admin Key)
Invoke-RestMethod -Uri "https://booking-manager-worker.afago101.workers.dev/api/admin/bookings" `
  -Headers @{"x-admin-key"="40lVHrWkepi2cOwZq7U19vIgNFaDoRXL"}
```

## ğŸ“ˆ ç³»çµ±æ¶æ§‹

```
ä½¿ç”¨è€…
   â†“
å‰ç«¯ (Cloudflare Pages)
https://88b5a047.booking-manager-pil.pages.dev
   â†“
å¾Œç«¯ API (Cloudflare Workers)
https://booking-manager-worker.afago101.workers.dev
   â†“
Google Sheets API v4
   â†“
Google Sheets (è³‡æ–™åº«)
â”œâ”€â”€ Bookings (è¨‚å–®)
â”œâ”€â”€ Prices (åƒ¹æ ¼)
â””â”€â”€ config (è¨­å®š)
```

## ğŸ”’ å®‰å…¨æ€§

- âœ… Private Key å­˜æ–¼ Cloudflare Secrets
- âœ… Admin API Key ä¿è­·æ‰€æœ‰å¯«å…¥æ“ä½œ
- âœ… CORS é™åˆ¶ï¼ˆå¯é…ç½®å…è¨±çš„ç¶²åŸŸï¼‰
- âœ… é€Ÿç‡é™åˆ¶ï¼ˆ60 req/min per IPï¼‰
- âœ… æ¨‚è§€é–é˜²æ­¢ä½µç™¼è¡çª
- âœ… è¼¸å…¥é©—è­‰

## ğŸ’° æˆæœ¬ä¼°ç®—

| æœå‹™ | ç”¨é‡ | æˆæœ¬ |
|-----|------|------|
| Cloudflare Workers | < 100K req/day | $0 (å…è²») |
| Cloudflare Pages | ç„¡é™ | $0 (å…è²») |
| Google Sheets API | < 500 req/day | $0 (å…è²») |
| **ç¸½è¨ˆ** | - | **$0/æœˆ** ğŸ‰ |

## ğŸ¯ ä¸‹ä¸€æ­¥å»ºè­°

### ç«‹å³å¯åš
1. âœ… æ¸¬è©¦å‰å°è¨‚æˆ¿æµç¨‹
2. âœ… æ¸¬è©¦å¾Œå°ç®¡ç†åŠŸèƒ½
3. âœ… æª¢æŸ¥ Google Sheets è³‡æ–™
4. âœ… è¨­å®šè‡ªè¨‚ç¶²åŸŸï¼ˆå¯é¸ï¼‰

### æœªä¾†æ“´å±•
- [ ] Email é€šçŸ¥æ•´åˆ
- [ ] LINE é€šçŸ¥æ•´åˆ
- [ ] å¤šæˆ¿å‹æ”¯æ´
- [ ] å‹•æ…‹å®šåƒ¹
- [ ] ä»˜æ¬¾æ•´åˆ
- [ ] å¤šèªè¨€å®Œæ•´æ”¯æ´
- [ ] çµ±è¨ˆåˆ†æå„€è¡¨æ¿

## ğŸ“ æŠ€è¡“æ”¯æ´

### æŸ¥çœ‹ Worker æ—¥èªŒ
```bash
cd worker
npx wrangler tail
```

### é‡æ–°éƒ¨ç½²

**Worker**:
```bash
cd worker
npm run deploy
```

**Frontend**:
```bash
npm run build
npx wrangler pages deploy dist --project-name=booking-manager
```

### æ›´æ–°è¨­å®š
åœ¨ Google Sheets çš„ config å·¥ä½œè¡¨ç›´æ¥ç·¨è¼¯ï¼Œç«‹å³ç”Ÿæ•ˆã€‚

### å‚™ä»½è³‡æ–™
Google Sheets è‡ªå‹•ä¿ç•™ç‰ˆæœ¬è¨˜éŒ„ï¼š
- æª”æ¡ˆ > ç‰ˆæœ¬è¨˜éŒ„ > æŸ¥çœ‹ç‰ˆæœ¬è¨˜éŒ„

## âœ¨ ç‰¹åˆ¥åŠŸèƒ½

### ä½µç™¼æ§åˆ¶
ç³»çµ±è‡ªå‹•æª¢æŸ¥æˆ¿é–“å®¹é‡ï¼Œé˜²æ­¢è¶…è³£ï¼š
- å¤šäººåŒæ™‚è¨‚æˆ¿ â†’ åªæœ‰å®¹é‡å…§çš„è¨‚å–®æˆåŠŸ
- è¶…å‡ºå®¹é‡ â†’ å›å‚³ 409 CONFLICT

### æ¨‚è§€é–
æ›´æ–°è¨‚å–®æ™‚éœ€æä¾› updatedAtï¼Œé˜²æ­¢è¦†è“‹å…¶ä»–äººçš„ä¿®æ”¹ã€‚

### è‡ªå‹•åŒæ­¥
Google Sheets å³æ”¹å³ç”Ÿæ•ˆï¼Œç„¡éœ€é‡å•Ÿç³»çµ±ã€‚

---

## ğŸŠ éƒ¨ç½²å®Œæˆï¼

**æ‰€æœ‰ç³»çµ±å·²ä¸Šç·šä¸¦æ­£å¸¸é‹ä½œï¼**

- âœ… å‰ç«¯éƒ¨ç½²å®Œæˆ
- âœ… å¾Œç«¯éƒ¨ç½²å®Œæˆ
- âœ… è³‡æ–™åº«é€£æ¥æ­£å¸¸
- âœ… API æ¸¬è©¦é€šé
- âœ… æ•´åˆæ¸¬è©¦é€šé

**é€²åº¦ï¼š100% å®Œæˆ** ğŸ‰

ç«‹å³è¨ªå•ï¼šhttps://88b5a047.booking-manager-pil.pages.dev

